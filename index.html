<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Cost Split Calculator</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }

      h2 {
        margin-top: 30px;
      }

      input,
      select {
        margin: 2px;
      }

      button {
        margin: 5px 0;
        padding: 4px 8px;
      }

      table,
      th,
      td {
        border: 1px solid black;
        border-collapse: collapse;
        padding: 5px;
      }

      table {
        margin-top: 10px;
      }

      #transaction-table {
        table-layout: auto;
        width: auto;
      }

      td,
      th {
        text-align: right;
      }

      td:first-child,
      th:first-child {
        text-align: left;
      }

      /* Removed collapsible styles now that split details are always visible */

      .delete-btn {
        cursor: pointer;
        color: red;
        margin-left: 5px;
      }

      .unused-row {
        background-color: yellow;
      }

      .invalid-cell {
        background-color: rgba(255, 0, 0, 0.4);
      }

      .dollar-field {
        display: flex;
        align-items: center;
      }

      .dollar-field .prefix {
        margin-right: 2px;
      }
    </style>
  </head>

  <body>
    <h1>Cost Split Calculator</h1>

    <h2>1. People</h2>
    <div id="people-section">
      <input type="text" id="person-name" placeholder="Name" />
      <button id="save-people" onclick="addPerson()">Add Person</button>
      <ul id="people-list"></ul>
    </div>

    <h2>2. Transactions</h2>
    <div id="transactions-section">
      <table id="transaction-table"></table>
    </div>

    <h2>3. Cost Splits</h2>
    <div id="splits-section">
      <div id="split-table"></div>
      <div id="split-details"></div>
    </div>

    <h2>4. Summary</h2>
    <div id="summary"></div>

    <h2>5. Save/Load State</h2>
    <div style="display: flex; align-items: center; gap: 5px; margin: 5px 0">
      <input
        id="state-json-display"
        type="text"
        readonly
        style="
          flex: 1;
          white-space: nowrap;
          overflow-x: auto;
          background-color: #f0f0f0;
        "
        placeholder="Current state JSON"
      />
      <button onclick="downloadJson()">Export JSON File</button>
    </div>
    <textarea
      id="state-json-input"
      rows="8"
      cols="50"
      placeholder="State JSON"
    ></textarea>
    <br />
    <button onclick="loadStateFromJson()">Load from JSON</button>
    <button onclick="document.getElementById('state-json-file').click()">
      Load from JSON File
    </button>
    <input
      type="file"
      id="state-json-file"
      accept="application/json"
      style="display: none"
      onchange="loadStateFromJsonFile(this.files[0])"
    />

    <script src="scripts.js"></script>
  </body>
</html>
