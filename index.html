<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Cost Split Calculator</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }

      h2 {
        margin-top: 30px;
      }

      input,
      select {
        margin: 2px;
      }

      button {
        margin: 5px 0;
        padding: 4px 8px;
      }

      button.unsaved {
        background-color: yellow;
      }

      button.invalid {
        background-color: red;
        color: white;
      }

      table,
      th,
      td {
        border: 1px solid black;
        border-collapse: collapse;
        padding: 5px;
      }

      table {
        margin-top: 10px;
      }

      #transaction-table {
        table-layout: auto;
        width: auto;
      }

      td,
      th {
        text-align: right;
      }

      td:first-child,
      th:first-child {
        text-align: left;
      }

      .collapsible {
        cursor: pointer;
        background: #eee;
        border: 1px solid #aaa;
        padding: 5px;
        margin-top: 5px;
      }

      .content {
        display: none;
        padding: 5px;
        border: 1px solid #aaa;
        margin-bottom: 10px;
      }

      .delete-btn {
        cursor: pointer;
        color: red;
        margin-left: 5px;
      }

      .unused-row {
        background-color: yellow;
      }

      .invalid-cell {
        background-color: rgba(255, 0, 0, 0.4);
      }
    </style>
  </head>

  <body>
    <h1>Cost Split Calculator</h1>

    <h2>1. People</h2>
    <div id="people-section">
      <input type="text" id="person-name" placeholder="Name" />
      <button id="save-people" onclick="addPerson()">Add Person</button>
      <ul id="people-list"></ul>
    </div>

    <h2>2. Transactions</h2>
    <div id="transactions-section">
      <table id="transaction-table"></table>
      <button id="save-transactions" onclick="saveTransactions()">
        Save Transactions
      </button>
    </div>

    <h2>3. Cost Splits</h2>
    <div id="splits-section">
      <button id="save-splits" onclick="saveAllSplits()">Save Splits</button>
      <div id="split-table"></div>
    </div>

    <h2 class="collapsible" onclick="toggleCollapse(this)">
      3a. Split Details (click to view)
    </h2>
    <div class="content" id="split-details"></div>

    <h2>4. Summary</h2>
    <button id="calculate-summary" onclick="calculateSummary()">
      Calculate Summary
    </button>
    <div id="summary"></div>

    <h2>5. Save/Load State</h2>
    <button onclick="saveStateToJson()">Save to JSON</button>
    <div style="display: flex; align-items: center; gap: 5px; margin: 5px 0;">
      <input
        id="state-json-display"
        type="text"
        readonly
        style="flex: 1; white-space: nowrap; overflow-x: auto;"
        placeholder="Current state JSON"
      />
      <button onclick="downloadJson()">Export JSON File</button>
    </div>
    <textarea
      id="state-json-input"
      rows="8"
      cols="50"
      placeholder="State JSON"
    ></textarea>
    <br />
    <button onclick="loadStateFromJson()">Load from JSON</button>

    <script src="scripts.js"></script>
  </body>
</html>
